{% extends 'Post/base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'auth/profile/style.css' %}">
<link rel="stylesheet" href="{% static 'auth/profile/rtl.css' %}">

{% if form.errors %}
  {% for field in form %}
      {% for error in field.errors %}
          <div class="alert alert-danger text-center mt-3">
              <strong>{{ error|escape }}</strong>
          </div>
      {% endfor %}
  {% endfor %}
  {% for error in form.non_field_errors %}
      <div class="alert alert-danger text-center mt-3">
          <strong>{{ error|escape }}</strong>
      </div>
  {% endfor %}
{% endif %}


{% if request.user.username == object.username %}
<form action="" method="POST">
    {% csrf_token %}
    <div class="container rounded bg-white mt-5 mb-5">
        <div class="row">
            <div class="col-md-3 border-right">
            </div>
                <div class="col-md-5 border-right">
                    <div class="p-3 py-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="text-right">Profile</h4>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-6"><label class="labels">First Name</label><br> {{form.first_name}}</div>
                            <div class="col-md-6"><label class="labels">Last Name</label> <br> {{form.last_name}}</div>
                            {{object.blocked_users_to_str}}
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-12"><label class="labels">username</label><br>{{form.username}} </div>
                        </div>
                        <input class="btn btn-info mt-2 " type="submit" value="change profile">
                    </div>
                </div>

            </div>
        </div>
        </div>
        </div>
    </form>
{% else %}
    <form action="" method="POST">
        {% csrf_token %}
        <div class="container rounded bg-white mt-5 mb-5">
            <div class="row">
                <div class="col-md-3 border-right">
                </div>
                <div class="col-md-5 border-right">
                    <div class="p-3 py-5">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h4 class="text-right">Profile</h4>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-5 alert bg-info me-1"><label class="labels">First Name</label><br> {{object.first_name}}</div>
                            <div class="col-md-5 alert bg-info me-1"><label class="labels">Last Name</label> <br> {{object.last_name}}</div>
                            <div class="col-md-5 alert bg-info me-1"><label class="labels">username</label><br>{{object.username}} </div>
                        </div>
                </div>

            </div>
        </div>
        </div>
        </div>
    </form>
{% endif %}
<div class="row row-cols-1 row-cols-md-3 g-4">
    {% for p in post %}
    <div class="col">
      <div class="card h-100">
        <div class="card-body">
          <span class="card-title fs-4">{{p.user}}</span>
          <span class="badge bg-primary"><a href="{% url 'post:edit-post' p.pk %}" style="text-decoration: none; color: aliceblue;"> Edit Post</a></span>
          <p class="card-text">{{p.text}}</p>
          <small>{{p.created}}</small>
        </div>
      </div>
    </div>
    {% endfor %}
</div>

{% endblock %}